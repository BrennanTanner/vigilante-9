[gd_scene load_steps=32 format=3 uid="uid://dov4h4ifh60v7"]

[ext_resource type="Texture2D" uid="uid://0wof2ikeolop" path="res://assets/texture_01.png" id="1_tbqoc"]
[ext_resource type="Script" uid="uid://bjenl5h3t2m30" path="res://Camera3D.gd" id="3_opq1w"]
[ext_resource type="PackedScene" uid="uid://wp0un6jcxgck" path="res://collectible.tscn" id="5_owug8"]
[ext_resource type="PackedScene" uid="uid://ddeo5omto3ehi" path="res://enemy-rigid.tscn" id="9_njel3"]
[ext_resource type="Shader" uid="uid://b1twbdp1050aj" path="res://Water.gdshader" id="10_rpuu0"]
[ext_resource type="PackedScene" uid="uid://c3ixqkc6k13yi" path="res://addons/gevp/scenes/vehicle_controller.tscn" id="11_2dw41"]
[ext_resource type="Script" uid="uid://bekdo6mejkpwv" path="res://addons/infinite_heightmap_terrain/infinite_terrain.gd" id="11_rpuu0"]
[ext_resource type="PackedScene" uid="uid://ccs7xtede51mo" path="res://addons/gevp/scenes/simcade_car.tscn" id="12_ykxp3"]
[ext_resource type="PackedScene" uid="uid://b2hlchrj4h2b7" path="res://addons/gevp/scenes/engine_sound.tscn" id="13_g6y4b"]
[ext_resource type="Curve" uid="uid://bsm1rahmksl6y" path="res://addons/infinite_heightmap_terrain/sample resources/textures/terrain_coloring_threshold_curve.tres" id="13_k6its"]
[ext_resource type="PackedScene" uid="uid://h6vdpba71kpr" path="res://addons/gevp/scenes/smoke_effect.tscn" id="14_pvxhv"]
[ext_resource type="PackedScene" uid="uid://dmr0fcamx7t56" path="res://addons/virtual_joystick/virtual_joystick_scene.tscn" id="15_6h1ut"]
[ext_resource type="Script" uid="uid://dxuvs2364c2i2" path="res://addons/gevp/scripts/gui.gd" id="16_6m80x"]
[ext_resource type="Script" uid="uid://denye1gc0f54" path="res://addons/gevp/scripts/debug.gd" id="17_cqn77"]
[ext_resource type="Script" uid="uid://dagdje4adxt0b" path="res://addons/gevp/scripts/debug_ui.gd" id="18_22oil"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_74a4f"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_pcewp"]
sky_material = SubResource("ProceduralSkyMaterial_74a4f")

[sub_resource type="Environment" id="Environment_pk4ow"]
background_mode = 2
sky = SubResource("Sky_pcewp")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="FastNoiseLite" id="FastNoiseLite_vr1i5"]
noise_type = 5
frequency = 0.05
fractal_weighted_strength = 1.0
cellular_jitter = 0.7
cellular_return_type = 0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_rpuu0"]
width = 200
height = 200
seamless = true
noise = SubResource("FastNoiseLite_vr1i5")

[sub_resource type="Curve" id="Curve_rpuu0"]
_data = [Vector2(0.0114155, 0.989934), 0.0, -9.36876, 0, 0, Vector2(0.913242, 0), 0.0, 0.0, 0, 0, Vector2(1, 0.0261325), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_4gito"]
curve = SubResource("Curve_rpuu0")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_oo8pe"]
render_priority = 0
shader = ExtResource("10_rpuu0")
shader_parameter/absorption_color = Color(1, 0.35, 0, 1)
shader_parameter/fresnel_radius = 2.0
shader_parameter/fresnel_color = Color(0, 0.57, 0.72, 1)
shader_parameter/roughness = 0.15
shader_parameter/specular = 0.25
shader_parameter/depth_distance = 25.0
shader_parameter/beers_law = 4.5
shader_parameter/displacement_strength = 0.3
shader_parameter/displacement_scroll_speed = 0.1
shader_parameter/displacement_scroll_offset = Vector2(-0.2, 0.3)
shader_parameter/displacement_scale_offset = 0.5
shader_parameter/displacement_scale = Vector2(0.04, 0.04)
shader_parameter/edge_thickness = 0.5
shader_parameter/edge_speed = 0.35
shader_parameter/edge_noise_scale = Vector2(0.2, 0.2)
shader_parameter/edge_noise = SubResource("NoiseTexture2D_rpuu0")
shader_parameter/edge_ramp = SubResource("CurveTexture_4gito")
shader_parameter/influence_size = 1.0
shader_parameter/player_wave_frequenzy = 10.0
shader_parameter/player_wave_speed = 5.0
shader_parameter/refraction_strength = 1.25
shader_parameter/normal_map_strength = 1.0
shader_parameter/scroll_speed = 0.3
shader_parameter/scroll_offset = Vector2(0.1, -0.3)
shader_parameter/scale_offset = 0.5
shader_parameter/normal_map_scale = Vector2(0.1, 0.1)

[sub_resource type="PlaneMesh" id="PlaneMesh_4gito"]
material = SubResource("ShaderMaterial_oo8pe")
size = Vector2(200, 200)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pj28r"]
albedo_texture = ExtResource("1_tbqoc")
uv1_triplanar = true

[sub_resource type="BoxMesh" id="BoxMesh_jugg0"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_pj28r")
size = Vector3(10, 2, 50)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_njel3"]
points = PackedVector3Array(5, 1, 25, 5, -1, 25, 5, 1, -25, -5, 1, 25, -5, -1, 25, 5, -1, -25, -5, 1, -25, -5, -1, -25)

[sub_resource type="HeightMapShape3D" id="HeightMapShape3D_vr1i5"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_rpuu0"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_rpuu0"]
fractal_type = 0
fractal_ping_pong_strength = 1.0
domain_warp_type = 1
domain_warp_amplitude = 100.0
domain_warp_fractal_type = 0

[sub_resource type="FastNoiseLite" id="FastNoiseLite_oo8pe"]
noise_type = 3
fractal_type = 0

[node name="TestScene" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_pk4ow")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 21.0919, 17.5162)
script = ExtResource("3_opq1w")
target = NodePath("../VehicleController/VehicleRigidBody")
lockYAxis = true

[node name="collectible" parent="." instance=ExtResource("5_owug8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.78277, 1, -14.4032)

[node name="Ocean" type="MeshInstance3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.5, -53.4047)
mesh = SubResource("PlaneMesh_4gito")
script = ExtResource("3_opq1w")
target = NodePath("../VehicleController/VehicleRigidBody")

[node name="Enemy" parent="." groups=["enemy"] instance=ExtResource("9_njel3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 38.4235, 3.03115, -56.5203)

[node name="Enemy2" parent="." groups=["enemy"] instance=ExtResource("9_njel3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27.7362, 5.37645, 31.817)

[node name="Enemy3" parent="." groups=["enemy"] instance=ExtResource("9_njel3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 38.4235, 3.52121, 13.523)

[node name="Enemy5" parent="." groups=["enemy"] instance=ExtResource("9_njel3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -74.5765, 7.38392, -9.477)

[node name="Enemy4" parent="." groups=["enemy"] instance=ExtResource("9_njel3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -83.5765, 9.46063, 3.523)

[node name="Enemy6" parent="." groups=["enemy"] instance=ExtResource("9_njel3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -88.5765, 7.46082, 13.523)

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.939693, -0.34202, 0, 0.34202, 0.939693, 57.3286, -0.993668, 9.01856)
mesh = SubResource("BoxMesh_jugg0")

[node name="StaticBody3D" type="StaticBody3D" parent="MeshInstance3D2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="MeshInstance3D2/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_njel3")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("HeightMapShape3D_vr1i5")

[node name="InfiniteTerrain" type="StaticBody3D" parent="." node_paths=PackedStringArray("player") groups=["Road"]]
physics_material_override = SubResource("PhysicsMaterial_rpuu0")
script = ExtResource("11_rpuu0")
player = NodePath("../VehicleController/VehicleRigidBody")
terrain_noise = SubResource("FastNoiseLite_rpuu0")
terrain_noise_large = SubResource("FastNoiseLite_oo8pe")
terrain_large_function = 2
terrain_chunk_size = 50.0
chunk_radius = 3
chunk_subdivisor = 2
terrain_height_multiplier = 15.0
terrain_color_steepness_curve = ExtResource("13_k6its")
mountain_strength = 0.1
metadata/_custom_type_script = "uid://bekdo6mejkpwv"

[node name="VehicleController" parent="." node_paths=PackedStringArray("vehicle_node") instance=ExtResource("11_2dw41")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.86042, 0)
vehicle_node = NodePath("VehicleRigidBody")

[node name="VehicleRigidBody" parent="VehicleController" groups=["player"] instance=ExtResource("12_ykxp3")]
mass = 5.0
gravity_scale = 2.0
max_torque = 600.0
max_rpm = 7000.0
vehicle_mass = 1000.0

[node name="EngineSound" parent="VehicleController/VehicleRigidBody" node_paths=PackedStringArray("vehicle") instance=ExtResource("13_g6y4b")]
vehicle = NodePath("..")

[node name="Smoke" parent="VehicleController/VehicleRigidBody" node_paths=PackedStringArray("vehicle") instance=ExtResource("14_pvxhv")]
vehicle = NodePath("..")

[node name="Virtual joystick" parent="VehicleController" instance=ExtResource("15_6h1ut")]
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.818
anchor_right = 0.5
anchor_bottom = 0.818
offset_left = -448.0
offset_top = -148.44
offset_right = -148.0
offset_bottom = 81.56
joystick_mode = 1

[node name="Button" type="Button" parent="VehicleController/Virtual joystick"]
visible = false
layout_mode = 1
anchors_preset = -1
anchor_left = 3.415
anchor_top = 0.5
anchor_right = 3.415
anchor_bottom = 0.5
offset_left = 58.5
offset_top = -52.0
offset_right = 255.5
offset_bottom = 73.0
action_mode = 0
text = "Brake"

[node name="GUI" type="Control" parent="." node_paths=PackedStringArray("vehicle")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("16_6m80x")
vehicle = NodePath("../VehicleController/VehicleRigidBody")

[node name="VBoxContainer" type="VBoxContainer" parent="GUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Speed" type="Label" parent="GUI/VBoxContainer"]
layout_mode = 2

[node name="RPM" type="Label" parent="GUI/VBoxContainer"]
layout_mode = 2

[node name="Gear" type="Label" parent="GUI/VBoxContainer"]
layout_mode = 2

[node name="Debug" type="Node" parent="." node_paths=PackedStringArray("vehicle")]
script = ExtResource("17_cqn77")
vehicle = NodePath("../VehicleController/VehicleRigidBody")

[node name="DebugUI" type="Control" parent="Debug"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("18_22oil")
metadata/_edit_use_anchors_ = true
